<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
  <title>Menu Card 新布局</title>
  <meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=1">
  <style>
    body { background: #182223; color: #fff; margin: 0; font-family: 'Segoe UI','PingFang SC','Microsoft YaHei',Arial,sans-serif;}
    .menu-wrap { max-width: 540px; margin: 0 auto; padding: 24px 0 70px 0;}
    .menu-item {
      display: flex; background: #232c2aef; border-radius: 15px;
      box-shadow: 0 3px 18px #1bc7a120;
      margin:0 12px 19px 12px; padding:14px 14px 18px 14px; gap: 0 16px;
      border: 1.3px solid #00e7ca3a;
      min-height: 140px;
      position: relative;
      flex-wrap: wrap;
    }
    .menu-img {
      width: 82px; height: 82px;
      border-radius: 12px;
      object-fit: cover;
      background: #1a2222;
      border: 2px solid #5ff5e0;
      flex-shrink: 0;
      margin-right: 0;
      box-shadow: 0 2px 8px #0003;
      display: block;
    }
    .menu-info-group {
      flex: 1; min-width: 0; display: flex; flex-direction: column; justify-content: flex-start; gap: 0;
    }
    .menu-row-top {
      display: flex; align-items: center; gap: 7px; margin-bottom: 3px;
    }
    .menu-name {
      font-size: 1.08em; font-weight: bold; color: #fff;
      max-width: 110px; overflow: hidden; text-overflow: ellipsis; white-space: nowrap;
    }
    .menu-badge {
      background: #ffe477; color: #856100; font-size: .83em; border-radius: 8px; padding: 1.5px 7px; font-weight:600;
    }
    .menu-type {
      background: #17e5c2; color: #133; font-size: .82em; border-radius: 7px; padding: 1px 7px;
    }
    .menu-thccbd {
      color: #6ff7ee; font-size: .96em; margin-left: 8px;
    }
    .menu-desc {
      font-size: .99em; color: #d7eeeb; line-height: 1.44; margin-bottom: 6px;
      overflow: hidden; text-overflow: ellipsis; display: -webkit-box; -webkit-line-clamp: 2; -webkit-box-orient: vertical;
    }
    .menu-prices-row {
      width: 100%; display: flex; gap: 12px;
      justify-content: flex-start; margin-top: 0;
      margin-left: calc(82px + 16px); /* align with info */
    }
    .menu-price-btn {
      flex: 1 1 0; min-width: 84px; background: #08dbc0dd;
      color: #1a2523; border-radius: 8px; font-size: 1.07em; font-weight: 600;
      border: none; outline: none; padding: 7px 0 6px 0; margin:0;
      box-shadow: 0 1px 7px #00e3b922;
      cursor: pointer;
      transition: background .13s;
      letter-spacing: .5px;
      text-align: center;
      user-select: none;
    }
    .menu-price-btn:not(:empty):hover { background: #4ff7e4; }
    @media (max-width: 600px) {
      .menu-wrap { padding: 10px 0 64px 0;}
      .menu-item { padding: 10px 7px 16px 7px; gap:0 9px;}
      .menu-img { width: 62px; height: 62px;}
      .menu-row-top .menu-name { max-width: 70px;}
      .menu-prices-row { margin-left: calc(62px + 9px);}
      .menu-price-btn { min-width: 65px; font-size: .99em;}
    }
    @media (max-width:400px){
      .menu-prices-row { gap:7px;}
    }
  </style>
</head>
<body>
  <div class="menu-wrap" id="menu"></div>
  <script>
    // 替换为你的 Sheet ID 和 tab
    const SHEET_ID = "1_vY7Cu22ZjBjTH8aS9Fze3_TN7HCkHUm012YtSZWrys";
    const SHEET_TAB = "beanmenu";
    const SHEET_URL = `https://opensheet.elk.sh/${SHEET_ID}/${SHEET_TAB}`;

    fetch(SHEET_URL)
      .then(res=>res.json())
      .then(rows=>{
        const html = rows.map(obj=>{
          return `
            <div class="menu-item">
              <img class="menu-img" src="${obj.img||''}" alt="" loading="lazy"/>
              <div class="menu-info-group">
                <div class="menu-row-top">
                  ${obj.badge ? `<span class="menu-badge">${obj.badge}</span>` : ""}
                  ${obj.name ? `<span class="menu-name">${obj.name}</span>` : ""}
                  ${obj.type ? `<span class="menu-type">${obj.type}</span>` : ""}
                </div>
                <div style="display:flex;align-items:center;gap:9px;margin-bottom:2px;">
                  ${obj.thccbd ? `<span class="menu-thccbd">${obj.thccbd}</span>` : ""}
                </div>
                ${obj.desc ? `<div class="menu-desc">${obj.desc}</div>` : ""}
              </div>
              <div class="menu-prices-row">
                ${obj.spec1&&obj.price1?`<span class="menu-price-btn">${obj.spec1} ${obj.price1}</span>`:""}
                ${obj.spec2&&obj.price2?`<span class="menu-price-btn">${obj.spec2} ${obj.price2}</span>`:""}
                ${obj.spec3&&obj.price3?`<span class="menu-price-btn">${obj.spec3} ${obj.price3}</span>`:""}
              </div>
            </div>
          `;
        }).join('');
        document.getElementById('menu').innerHTML = html || `<div style="text-align:center;color:#ccc;margin-top:40px;">暂无菜单内容</div>`;
      })
      .catch(err=>{
        document.getElementById('menu').innerHTML = "<div style='text-align:center;color:#fff;margin-top:36vw;font-size:1.08em;'>菜单加载失败，请刷新重试。</div>";
        console.error(err);
      });
  </script>
</body>
</html>
