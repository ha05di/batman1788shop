<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
  <title>Menu Card</title>
  <meta name="viewport" content="width=device-width,initial-scale=1,maximum-scale=1">
  <style>
    body { background: #1b2326; color: #fff; margin:0; font-family: 'Segoe UI','PingFang SC','Microsoft YaHei',Arial,sans-serif;}
    .menu-wrap { max-width: 530px; margin: 0 auto; padding: 24px 0 80px 0;}
    .menu-item {
      display: flex; flex-direction: row;
      background: #223235ed;
      border-radius: 13px;
      box-shadow: 0 2px 15px #00382933;
      margin: 0 14px 22px 14px;
      padding: 12px 14px 54px 14px;
      position: relative;
      min-height: 140px;
      border: 1.4px solid #27f0d186;
    }
    .menu-imgbox {
      flex-shrink: 0;
      width: 87px; display:flex; align-items: flex-start; justify-content:center;
    }
    .menu-img {
      width: 87px; height: 87px; object-fit: cover; border-radius: 12px;
      background: #1a2627; border:2px solid #43e4d8; box-shadow: 0 1px 8px #00f5e3ab;
    }
    .menu-info {
      flex:1; display: flex; flex-direction: column; min-width: 0; margin-left: 12px;
      justify-content: flex-start;
    }
    .row-top {
      display: flex; align-items: center; gap: 7px; margin-bottom: 2px; flex-wrap:wrap;
    }
    .menu-badge {
      background: #ffed93; color: #6b5402; font-size:.87em; border-radius: 7px; padding:2.5px 9px 2px 9px; font-weight:600;
    }
    .menu-name {
      font-size: 1.12em; font-weight: bold; color: #fff; max-width:92px;
      overflow: hidden; text-overflow: ellipsis; white-space: nowrap; margin-right:6px;
    }
    .menu-type {
      background: #22ebbc; color: #162; font-size:.86em; border-radius: 7px; padding:2px 9px;
    }
    .menu-thccbd {
      color: #69ffe9; font-size: .96em; font-weight: 500; margin-bottom: 4px; margin-top: 0; display: block;
    }
    .menu-desc {
      font-size: 1.01em; color: #d8eeee; line-height: 1.44; margin: 5px 0 0 0;
      flex:1;
      overflow: hidden; text-overflow: ellipsis;
      display: -webkit-box; -webkit-line-clamp: 2; -webkit-box-orient: vertical;
    }
    .menu-prices-row {
      display: flex; gap: 12px;
      justify-content: flex-start;
      width: 100%; min-height: 0;
      position: absolute; left: 0; right: 0; bottom: 12px; padding: 0 20px;
    }
    .menu-price-btn {
      flex: 1 1 0; min-width: 85px; background: #15dec2ec; color: #142;
      border-radius: 8px; font-size: 1.09em; font-weight: 700; border: none;
      padding: 7px 0 7px 0; margin:0; box-shadow: 0 1px 8px #00ecd944;
      letter-spacing: .5px; text-align: center; user-select: none;
      transition: background .13s; white-space: nowrap;
    }
    .menu-price-btn:not(:empty):hover { background: #64ffe4; color:#000;}
    @media (max-width: 600px) {
      .menu-wrap { padding: 7px 0 65px 0;}
      .menu-item { padding: 8px 5px 50px 5px;}
      .menu-imgbox, .menu-img { width: 58px; height: 58px;}
      .menu-name { max-width: 65px;}
      .menu-info { margin-left: 7px;}
      .menu-prices-row { padding: 0 5px;}
    }
    @media (max-width:420px){
      .menu-item { flex-direction: column; align-items: stretch; padding-bottom: 65px;}
      .menu-imgbox { width: 100%; justify-content: flex-start;}
      .menu-img { margin: 0 0 5px 0;}
      .menu-info { margin-left:0; margin-top: 6px;}
      .menu-prices-row { position: absolute; left: 0; right: 0; bottom: 7px;}
    }
  </style>
</head>
<body>
  <div class="menu-wrap" id="menu"></div>
  <script>
    // 替换为你的 Sheet ID 和 tab
    const SHEET_ID = "1_vY7Cu22ZjBjTH8aS9Fze3_TN7HCkHUm012YtSZWrys";
    const SHEET_TAB = "beanmenu";
    const SHEET_URL = `https://opensheet.elk.sh/${SHEET_ID}/${SHEET_TAB}`;

    fetch(SHEET_URL)
      .then(res=>res.json())
      .then(rows=>{
        const html = rows.map(obj=>{
          return `
            <div class="menu-item">
              <div class="menu-imgbox">
                <img class="menu-img" src="${obj.img||''}" alt="" loading="lazy"/>
              </div>
              <div class="menu-info">
                <div class="row-top">
                  ${obj.badge ? `<span class="menu-badge">${obj.badge}</span>` : ""}
                  ${obj.name ? `<span class="menu-name">${obj.name}</span>` : ""}
                  ${obj.type ? `<span class="menu-type">${obj.type}</span>` : ""}
                </div>
                ${obj.thccbd ? `<span class="menu-thccbd">${obj.thccbd}</span>` : ""}
                <div class="menu-desc">${obj.desc ? obj.desc : ""}</div>
                <div class="menu-prices-row">
                  ${obj.spec1&&obj.price1?`<span class="menu-price-btn">${obj.spec1} ${obj.price1}</span>`:""}
                  ${obj.spec2&&obj.price2?`<span class="menu-price-btn">${obj.spec2} ${obj.price2}</span>`:""}
                  ${obj.spec3&&obj.price3?`<span class="menu-price-btn">${obj.spec3} ${obj.price3}</span>`:""}
                </div>
              </div>
            </div>
          `;
        }).join('');
        document.getElementById('menu').innerHTML = html || `<div style="text-align:center;color:#ccc;margin-top:40px;">暂无菜单内容</div>`;
      })
      .catch(err=>{
        document.getElementById('menu').innerHTML = "<div style='text-align:center;color:#fff;margin-top:36vw;font-size:1.08em;'>菜单加载失败，请刷新重试。</div>";
        console.error(err);
      });
  </script>
</body>
</html>
